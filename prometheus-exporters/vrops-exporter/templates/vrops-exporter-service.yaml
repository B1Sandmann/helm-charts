{{- if .Values.vrops.enabled }}
{{- range $exporter_type := $.Values.vrops.exporter_types }}
{{- if $exporter_type.enabled }}
---
kind: Service
apiVersion: v1
metadata:
  name: vrops-exporter-{{ required "$exporter_type.name is missing" $exporter_type.name }}
  namespace: infra-monitoring
spec:
  selector:
    app: vrops-exporter-{{ required "$exporter_type.name is missing" $exporter_type.name }}
  ports:
    - name: metrics
      port: {{ $.Values.vrops.port_number }}
{{- end }}
{{- end }}
{{- end }}
