groups:
- name: pingexporter.alerts
  rules:
  - alert: InfraPingExporterNotRunning
    expr: absent(ping_up) or ping_up == 0
    for: 15m
    labels:
      meta: Ping exporter is not running in {{ $labels.region }}
      severity: info
      tier: os
    annotations:
      description: Ping exporter is not running in {{ $labels.region }}
      summary: Ping exporter is not running in {{ $labels.region }}

- name: interconnect.alerts
  rules:
  - alert: InterconnectDown
    expr: ping_loss_percent == 1
    for: 5m
    labels:
      context: interconnect
#      dashboard: must be a regional
     playbook: /docs/devops/alert/network/interconnect.html
     meta: '{{ $labels.probed_from }} cannot ping target in {{ $labels.probed_to }}'
     service: interconnect
     severity: info
     tier: net
   annotations:
     description: '{{ $labels.probed_from }} cannot ping target in {{ $labels.probed_to }}'
     summary: '{{ $labels.probed_from }} cannot ping target in {{ $labels.probed_to }}'
