{{- if .Values.snmp_exporter.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: snmp-exporter
  labels:
    system: openstack
    service: metrics
data:
  snmp-exporter.yaml: |
{{- range $config := .Values.snmp_exporter.targets }}
{{ include (print "_snmp-exporter-arista.yaml.tpl") . | indent 4 }}
      version: {{ $config.version }}
      auth:
        community: {{ $config.community }}
{{- end }}
{{- end }}
