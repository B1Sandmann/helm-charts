apiVersion: v1
kind: ConfigMap
metadata:
  name: snmp-exporter
  labels:
    system: openstack
    service: metrics
data:
  snmp-exporter.yaml: |
{{- range $config := .Values.snmp_exporter.targets }}
{{ include (print $.Template.BasePath "/_snmp-exporter-arista.yaml.tpl" ) . | b64enc | indent 4 }}
      version: {{ $config.version }}
      auth:
        community: {{ $config.community }}
{{- end }}
