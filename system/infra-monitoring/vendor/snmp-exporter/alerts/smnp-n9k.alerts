groups:
- name: n9k.alerts
  rules:
  - alert: NetworkN9kInterfaceInErrors
    expr: rate(snmp_n9k_ifInErrors{device!~"^mgmt.+"}[5m]) > 3.33
    for: 10m
    labels:
      severity: info
      tier: net
      service: n9k
      context: "{{ $labels.devicename }} "
      meta: 'In-Interface {{ $labels.interface }} on device {{ $labels.devicename }} has more than 1k errors within 5 minutes'
#      playbook: /docs/devops/alert/network/ntp.html
    annotations:
      description: 'In-Interface {{ $labels.interface }} on device {{ $labels.devicename }} has more than 1k errors within 5 minutes'
      summary: 'In-Interface {{ $labels.interface }} on device {{ $labels.devicename }} has more than 1k errors within 5 minutes'

  - alert: NetworkN9kInterfaceOutErrors
    expr: rate(snmp_n9k_ifOutErrors{device!~"^mgmt.+"}[5m]) > 3.33
    for: 10m
    labels:
      severity: info
      tier: net
      service: n9k
      context: "{{ $labels.devicename }} "
      meta: 'Out-Interface {{ $labels.interface }} on device {{ $labels.devicename }} has more than 1k errors within 5 minutes'
#      playbook: /docs/devops/alert/network/ntp.html
    annotations:
      description: 'Out-Interface {{ $labels.interface }} on device {{ $labels.devicename }} has more than 1k errors within 5 minutes'
      summary: 'Out-Interface {{ $labels.interface }} on device {{ $labels.devicename }} has more than 1k errors within 5 minutes'
