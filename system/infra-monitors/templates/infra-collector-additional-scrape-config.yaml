{{- if .Values.infra-collector-prometheus.enabled }}
apiVersion: v1
kind: Secret

metadata:
  name: {{ .Values.infra-collector-prometheus.name }}-additional-scrape-config
  labels:
    prometheus: {{ .Values.infra-collector-prometheus.name }}

data:
  scrape-config.yaml: {{ include (print $.Template.BasePath "/_infra-collector.yaml.tpl") . | b64enc }}
{{- end }}
