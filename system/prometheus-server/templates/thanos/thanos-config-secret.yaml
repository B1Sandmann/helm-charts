{{- if .Values.thanos.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ required ".Values.thanos.spec.objectStorageConfig.name missing" .Values.thanos.spec.objectStorageConfig.name }}
  labels:
    prometheus: openstack
data:
  {{ required ".Values.thanos.spec.objectStorageConfig.key missing" .Values.thanos.spec.objectStorageConfig.key }}: {{ include (print $.Template.BasePath  "/thanos/_thanos.yaml.tpl") . | b64enc }}
{{ end }}
